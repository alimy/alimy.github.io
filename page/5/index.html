    <!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

<head>
	<meta name="generator" content="Hugo 0.155.3">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
  <title> 北野 &middot; 那年江湖，遇见你 </title>
  
  <link rel="stylesheet" type="text/css" href="https://alimy.github.io//css/uno.css" />
  <link rel="stylesheet" type="text/css" href="https://alimy.github.io//css/lightGallery.css" />
  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://alimy.github.io/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="https://alimy.github.io/favicon.png">
  
  <script src="https://alimy.github.io//js/jquery.min.js"></script>
  <script src="https://alimy.github.io//js/main.min.js"></script>

  <script data-host="https://riiffy.com" data-dnt="false" src="https://riiffy.com/js/script.js" id="ZwSg9rf6GA" async
    defer></script>

  <style type="text/css">
    body {
      background-color: #f9f9f9;
    }

    .panel-wrapper {
      box-shadow: 0px 0px 8px rgba(68, 68, 68, .6);
      -moz-box-shadow: 0px 0px 8px rgba(68, 68, 68, .6);
      border-radius: 4px;
      -moz-border-radius: 4px;
      padding: 16px 24px;
      margin-top: 32px;
      background-color: #fff
    }

    .panel-wrapper:hover {
      box-shadow: 0px 0px 12px rgba(68, 68, 68, .6);
      -moz-box-shadow: 0px 0px 12px rgba(68, 68, 68, .6);
    }

    #more {
      margin-top: 16px;
    }

    #copyright {
      padding: 2em 0 0;
      display: block;
      font-size: .9em;
      color: #b3b3b3;
      width: 100%;
      text-align: center
    }

    #list-indicator {
      min-width: 48px;
      text-align: center;
      float: right;
      margin-right: 64px;
      background: rgba(68, 68, 68, .2);
      border-radius: 4px;
      -moz-border-radius: 4px;
      padding: 8px;
    }

    #list-date {
      color: #999;
      font-size: .9em;
      font-style: italic;
    }

    .post-tags-item {
      padding-left: .75rem !important;
      padding-right: .75rem !important;
      padding-top: .25rem !important;
      padding-bottom: .25rem !important;
      margin-right: .5rem !important;
      margin-top: .25rem !important;
      margin-bottom: .25rem !important;
      font-size: .875rem !important;
      color: #666666;
      display: inline-block !important;
      border-radius: .25rem !important;
      background-color: rgb(242 242 247) !important;
    }

    .post-tags-item:hover {
      color: #38b2ac;
    }

    #post-navigator {
      padding: 24px 0px 16px 0px;
      vertical-align: middle;
    }

    #post-navigator>a {
      display: block;
      color: #2479cc;
      text-decoration: none;
    }

    #post-navigator-prev {
      float: left;
    }

    #post-navigator-next {
      float: right;
    }

    .pages {
      text-align: center;
      margin-right: -15px;
      margin-left: -15px;
    }

    .pages>ul {
      font-weight: lighter;
    }

    .pages>.pagination {
      display: inline-block;
      padding-left: 0;
      margin: 20px 0px;
      border-radius: 4px;
    }

    .pages .pagination>li {
      display: inline;
    }

    .pagination>.active>a,
    .pagination>.active>span,
    .pagination>.active>a:hover,
    .pagination>.active>span:hover,
    .pagination>.active>a:focus,
    .pagination>.active>span:focus {
      z-index: 2;
      color: #fff;
      cursor: default;
      background-color: #428bca;
      border-color: #428bca;
    }

    .pagination>li>a,
    .pagination>li>span {
      position: relative;
      float: left;
      padding: 6px 12px;
      margin-left: -1px;
      line-height: 1.428571429;
      text-decoration: none;
      background-color: #fff;
      border: 1px solid #ddd;
    }

    .pagination>li:first-child>a,
    .pagination>li:first-child>span {
      margin-left: 0;
      border-bottom-left-radius: 4px;
      border-top-left-radius: 4px;
    }

    .pagination>.disabled>span,
    .pagination>.disabled>span:hover,
    .pagination>.disabled>span:focus,
    .pagination>.disabled>a,
    .pagination>.disabled>a:hover,
    .pagination>.disabled>a:focus {
      color: #999;
      cursor: not-allowed;
      background-color: #fff;
      border-color: #ddd;
    }

    .pagination>li:last-child>a,
    .pagination>li:last-child>span {
      border-top-right-radius: 4px;
      border-bottom-right-radius: 4px;
    }

    *,
    *:before,
    *:after {
      -webkit-box-sizing: border-box;
      -moz-box-sizing: border-box;
      box-sizing: border-box;
    }
  </style>
</head>
    <body>
        <div id="scriptHeader">
    <span class="mobile btn-mobile-menu">
        <i class="fa fa-bars btn-mobile-menu__icon"></i>
        <i class="fa fa-times btn-mobile-close__icon hidden"> </i>
    </span>
    <header class="
        
         panel-cover panel-cover--collapsed  " 
        style="background-image: url(/images/cover.jpg)" >
        <div class="panel-main">
            <div class="panel-main__inner panel-inverted">
                <div class="panel-main__content">
                    <a href="https://alimy.github.io//"> <img src="https://alimy.github.io/images/logo.jpg"
                            width="256" alt="北野 logo" class="panel-cover__logo logo" /> </a> 
                    <h1 class="panel-cover__title panel-title">
                        <a href="https://alimy.github.io//">北野</a>
                    </h1>
                    <hr class="panel-cover__divider" />
                    <p class="panel-cover__description">  那年江湖，遇见你  </p>
                    <hr class="panel-cover__divider panel-cover__divider--secondary" />
                    <div class="navigation-wrapper">
                        <nav class="cover-navigation cover-navigation--primary">
                            <ul class="navigation">
                                <li class="navigation__item"><a href="https://alimy.github.io/" title="博客首页"
                                        class="blog-button">首页</a> </li> </br></br>
                                <li class="navigation__item"><a href="https://alimy.github.io/post" title="文章列表"
                                        class="blog-button">文章列表</a> </li>
                                </br>  </br>
                                <li class="navigation__item"><a href="https://alimy.github.io/pages/cv" title="关于我 "
                                        class="blog-button">关于我</a> </li>
                                </br> 
                            </ul>
                            <nav class="cover-navigation navigation--social">
</br>
    <ul class="navigation"> 
        
        <li class="navigation__item">
            <a href="https://iibiubiu.com" title="@iiBiuBiu" target="_blank"> <i class='fa fa-anchor'></i> <span class="label">Twitter</span> </a>
        </li>
        <li class="navigation__item">
            <a href="https://www.paopao.info/#/u?s=alimy" title="@paopao" target="_blank"> <i class='fa fa-leaf'></i> <span class="label">Twitter</span> </a>
        </li><br>
        
        
        
          
        
        <li class="navigation__item">
            <a href="https://github.com/alimy" title="@GitHub" target="_blank"> <i class='fa fa-github'></i> <span class="label">Github</span> </a>
        </li>   </br>    </ul>
</nav>

                        </nav>
                    </div>
                </div>
            </div>
            <div class="panel-cover--overlay"></div>
        </div>
    </header>
</div>
<noscript>
    <style>
        #scriptHeader {
            display: none;
        }

        .navigation-wrapper {
            display: block;
            top: 0;
        }
    </style>

    <header class="panel-cover panel-cover--collapsed" style="background-image: url(/images/cover.jpg)">
        <div class="panel-main">
            <div class="panel-main__inner panel-inverted">
                <div class="panel-main__content"> 
                    <a href="https://alimy.github.io//"> <img src="https://alimy.github.io/images/logo.jpg" width="80"
                            alt="北野 logo" class="panel-cover__logo logo" /> </a> 
                    <h1 class="panel-cover__title panel-title">
                        <a href="https://alimy.github.io//">北野</a>
                    </h1>
                    <hr class="panel-cover__divider" />
                    <p class="panel-cover__description">  那年江湖，遇见你  </p>
                    <hr class="panel-cover__divider panel-cover__divider--secondary" />
                    <div class="navigation-wrapper">
                        <nav class="cover-navigation cover-navigation--primary">
                            <ul class="navigation">
                                <li class="navigation__item"><a href="https://alimy.github.io/" title="博客首页"
                                        class="blog-button">Blog</a> </li></br></br>
                                <li class="navigation__item"><a href="https://alimy.github.io//post/" title="文章列表"
                                        class="blog-button">Articles</a> </li>
                                </br>  </br>
                                <li class="navigation__item"><a href="https://alimy.github.io/pages/cv" title="关于我 "
                                        class="blog-button">About Me</a> </li>
                                </br> 
                            </ul>
                        </nav> <nav class="cover-navigation navigation--social">
</br>
    <ul class="navigation"> 
        
        <li class="navigation__item">
            <a href="https://iibiubiu.com" title="@iiBiuBiu" target="_blank"> <i class='fa fa-anchor'></i> <span class="label">Twitter</span> </a>
        </li>
        <li class="navigation__item">
            <a href="https://www.paopao.info/#/u?s=alimy" title="@paopao" target="_blank"> <i class='fa fa-leaf'></i> <span class="label">Twitter</span> </a>
        </li><br>
        
        
        
          
        
        <li class="navigation__item">
            <a href="https://github.com/alimy" title="@GitHub" target="_blank"> <i class='fa fa-github'></i> <span class="label">Github</span> </a>
        </li>   </br>    </ul>
</nav>

                    </div>
                </div>
            </div>
            <div class="panel-cover--overlay"></div>
        </div>
    </header>
</noscript>
        <div class="content-wrapper">
            <div class="content-wrapper__inner">
                <section id="main">
                    <div>
                        
                            <article class="post panel-wrapper">
    <header>
        <h2><a href="https://alimy.github.io/post/dev_202102191130/" title="阅读全文">Memcached - A Story of Caching </a> </h2>
        
    </header>
    <div class="summary">
        <p><em>ed note: this is an overview of basic memcached use case, and how memcached clients work</em></p>
<p>Two plucky adventurers, Programmer and Sysadmin, set out on a journey. Together they make websites. Websites with webservers and databases. Users from all over the Internet talk to the webservers and ask them to make pages for them. The webservers ask the databases for junk they need to make the pages. Programmer codes, Sysadmin adds webservers and database servers.</p>
<p>One day the Sysadmin realizes that their database is sick! It’s spewing bile and red stuff all over! Sysadmin declares it has a fever, a load average of 20! Programmer asks Sysadmin, “well, what can we do?” Sysadmin says, “I heard about this great thing called memcached. It really helped livejournal!” “Okay, let’s try it!” says the Programmer.</p>
<p>Our plucky Sysadmin eyes his webservers, of which he has six. He decides to use three of them to run the ‘memcached’ server. Sysadmin adds a gigabyte of ram to each webserver, and starts up memcached with a limit of 1 gigabyte each. So he has three memcached instances, each can hold up to 1 gigabyte of data. So the Programmer and the Sysadmin step back and behold their glorious memcached!</p>
<p>“So now what?” they say, “it’s not DOING anything!” The memcacheds aren’t talking to anything and they certainly don’t have any data. And NOW their database has a load of 25!</p>
    </div>
    <footer id="more">
        <a href='https://alimy.github.io/post/dev_202102191130/' title="继续阅读">阅读全文<nobr>&nbsp;<i class="fa fa-caret-right" aria-hidden="true"></i>
            </nobr></a>
    </footer>
</article>
                        
                            <article class="post panel-wrapper">
    <header>
        <h2><a href="https://alimy.github.io/post/dev_202102191110/" title="阅读全文">Memcached - Meta Text Protocol </a> </h2>
        
    </header>
    <div class="summary">
        <p>NOTE: These commands are new. Please let us know if you run into any trouble with the API or the documentation! The meta protocol is no longer considered experimental, please give it a shot!</p>
<p>NOTE: binary protocol is deprecated. meta protocol is cross-compatible with the text protocol, includes every feature the binary protocol has, and has many enhancements.</p>
<p>Memcached has additional commands which are used to reduce bytes on the wire, reduce network roundtrips required for complex queries (such as anti-dogpiling techniques), expose previously hidden item information, and add many new features. These are in addition to the existing Text Protocol, and can do everything the Binary Protocol could do before.</p>
<p>The full description of the Meta commands are available in the Text Protocol documentation:</p>
<ul>
<li><a href="http://github.com/memcached/memcached/blob/master/doc/protocol.txt">Text Protocol</a></li>
</ul>
<p>This wiki serves as a companion to protocol.txt with use cases and examples of the new commands.</p>
<h3 id="command-basics">Command Basics </h3>
<p>Commands and responses start with a two character code then a set of flags, and potentially value data. Flags may have token data attached to them.</p>
    </div>
    <footer id="more">
        <a href='https://alimy.github.io/post/dev_202102191110/' title="继续阅读">阅读全文<nobr>&nbsp;<i class="fa fa-caret-right" aria-hidden="true"></i>
            </nobr></a>
    </footer>
</article>
                        
                            <article class="post panel-wrapper">
    <header>
        <h2><a href="https://alimy.github.io/post/dev_202102191100/" title="阅读全文">Memcached - Basic Text Protocol </a> </h2>
        
    </header>
    <div class="summary">
        <p>Memcached handles a small number of basic commands.</p>
<p>Full documentation can be found in the <a href="https://docs.memcached.org/protocols/">Protocol Documentation</a>.</p>
<h3 id="standard-protocol">Standard Protocol </h3>
<p>The “standard protocol stuff” of memcached involves running a command against an “item”. An item consists of:</p>
<ul>
<li>A key (arbitrary string up to 250 bytes in length. No space or newlines for ASCII mode)</li>
<li>A 32bit “flag” value</li>
<li>An expiration time, in seconds. ‘0’ means never expire. Can be up to 30 days. After 30 days, is treated as a unix timestamp of an exact date.</li>
<li>A 64bit “CAS” value, which is kept unique.</li>
<li>Arbitrary data</li>
</ul>
<p>CAS is optional (can be disabled entirely with <code>-C</code>, and there are more fields that internally make up an item, but these are what your client interacts with.</p>
<h4 id="no-reply">No Reply </h4>
<p>Most ASCII commands allow a “noreply” version. One should not normally use this with the ASCII protocol, as it is impossible to align errors with requests. The intent is to avoid having to wait for a return packet after executing a mutation command (such as a set or add).</p>
    </div>
    <footer id="more">
        <a href='https://alimy.github.io/post/dev_202102191100/' title="继续阅读">阅读全文<nobr>&nbsp;<i class="fa fa-caret-right" aria-hidden="true"></i>
            </nobr></a>
    </footer>
</article>
                        
                            <article class="post panel-wrapper">
    <header>
        <h2><a href="https://alimy.github.io/post/dev_202102191015/" title="阅读全文">Cache your sessions. Don&#39;t piss off your users </a> </h2>
        
    </header>
    <div class="summary">
        <p>I hope you&rsquo;re all enjoying the <a href="http://danga.com/memcached/news.bml">1.2.6</a> stable release of memcached. Don&rsquo;t want to hear no whining about it crashing!</p>
<p>One of the most common questions in memcached land is the ever obnoxious &ldquo;how do I put my sessions in memcached?&rdquo;. The long standing answer is usually &ldquo;you don&rsquo;t&rdquo;, or &ldquo;carefully&rdquo;, but people often walk the dark path instead. Many libraries do this as well, although I&rsquo;ve seen at least one which gets it.</p>
<p>This isn&rsquo;t as huge of a deal as people make it out to be. I&rsquo;ve been asked about this over the mailing list, in IRC, in person, and even in job interviews. What people end up doing gives me the willies! Why! Why why why&hellip; Well, I know why.</p>
<p>So what <em>is</em> the deal with sessions? Why does everyone want to jettison them from mysql/postgres/disk/whatever? Well, a session is:</p>
<ul>
<li>Almost always larger than 250 bytes, and almost always smaller than 5 kilobytes.</li>
<li>Read from datastore for every logged in (and often logged out) user for every dynamic page load.</li>
<li>Written <em>to</em> the datastore for every dynamic page load.</li>
<li>Eventually reaped from the database after N minutes of inactivity.</li>
</ul>
<p>Ok well that sucks I guess. Every time a user loads a page we read a blob row from mysql, then write a blob row back. This is a lot slower than row without blobs. Alright, so I see it now. Memcached to the rescue!</p>
    </div>
    <footer id="more">
        <a href='https://alimy.github.io/post/dev_202102191015/' title="继续阅读">阅读全文<nobr>&nbsp;<i class="fa fa-caret-right" aria-hidden="true"></i>
            </nobr></a>
    </footer>
</article>
                        
                            <article class="post panel-wrapper">
    <header>
        <h2><a href="https://alimy.github.io/post/dev_202101311010/" title="阅读全文">Uber’s Real-Time Push Platform </a> </h2>
        
    </header>
    <div class="summary">
        <p><img src="https://alimy.github.io/images/post/20210131101000.png" alt=""></p>
<p>Uber builds multi-sided marketplaces handling millions of trips every day across the globe. We strive to build real-time experiences for all our users.</p>
<p>The nature of real time marketplaces make them very lively. Over the course of a trip, there are multiple participants that can modify and view the state of an ongoing trip and need real-time updates. This creates the need to keep all active participants and apps synced with real-time information, whether it’s through pickup time, arrival time, and route lines on the screen, or nearby drivers when you open the app.</p>
<p>A key dimension of growth was feature explosion in critical user screens and the need for developers across the company to build real-time mobile features in a decentralized way on a shared app screen.</p>
<p>This article describes how we went from polling for refreshing the app to a gRPC-based bi-directional streaming protocol to build our app experience.</p>
    </div>
    <footer id="more">
        <a href='https://alimy.github.io/post/dev_202101311010/' title="继续阅读">阅读全文<nobr>&nbsp;<i class="fa fa-caret-right" aria-hidden="true"></i>
            </nobr></a>
    </footer>
</article>
                        
                            <article class="post panel-wrapper">
    <header>
        <h2><a href="https://alimy.github.io/post/dev_202101191805/" title="阅读全文">MacOS /usr/bin/目录下 Operation not permitted的解决 </a> </h2>
        
    </header>
    <div class="summary">
        <p>mac系统下的Rootless机制，让我们在root权限下也不能随心所欲的读写所有路径了，特殊情况下我们需要关闭Rootless时，可尝试如下操作：</p>
<ol>
<li>
<p>重启按住 <code>Command+R</code>，进入恢复模式，打开Terminal；</p>
</li>
<li>
<p>键入命令 <code>csrutil disable</code>；</p>
</li>
<li>
<p>再次重启，即可对 usr/bin 目录下文件进行修改；</p>
</li>
<li>
<p>如果要恢复保护机制，重新进入保护模式，输入 <code>csrutil enable</code>;</p>
</li>
</ol>
<p><strong>Rootless机制是对抗恶意程序的最后防线，除非特殊需要时我们才将其关闭，否则保持开启状态</strong></p>
    </div>
    <footer id="more">
        <a href='https://alimy.github.io/post/dev_202101191805/' title="继续阅读">阅读全文<nobr>&nbsp;<i class="fa fa-caret-right" aria-hidden="true"></i>
            </nobr></a>
    </footer>
</article>
                        
                            <article class="post panel-wrapper">
    <header>
        <h2><a href="https://alimy.github.io/post/dev_202101191738/" title="阅读全文">Mac OS包管理软件brew和port介绍 </a> </h2>
        
    </header>
    <div class="summary">
        <p>Mac OS中主要有三种包管理工具：MacPorts，Homebrew，Fink。这里简介Homebrew和MacPorts的区别：</p>
<p><strong>MacPorts</strong>：<br>
因为 Mac OS 源自 BSD，因此将 BSD 中的 Port 移植到 OS 成为 MacPorts 就一点不奇怪。MacPorts 会独立于 OS 自建一套仓库树，OS 的包执行目录为 /usr/local，而 MacPorts 的包执行目录为 /opt/local。MacPorts 尽量不影响系统现有程序，自然也就尽量少复用系统已有程序。MacPorts 安装包的过程是下载该程序的所有源文件及其依赖包，然后在本地进行 Build 生成最终的可执行文件。这样做的好处是在系统中存在一套独立的生态环境，从而不影响系统自身的生态环境，缺点就是浪费了系统自身的生态资源。</p>
<p><strong>Homebrew</strong>：<br>
在 Lion 之后兴起的包管理工具，工作方式与 MacPorts 类似，下载源代码然后本地 Build。不同之处在于 Homebrew 采取与 MacPorts 截然相反的态度，对系统资源是最大程度的利用，因此可以说 Homebrew 是直接对现有系统生态环境进行修改，所有包也是直接安装到现有的生态环境中，这样做的好处是节约了系统资源，但缺点是每一次操作都是直接对系统进行修改，严重依赖和影响现有系统。</p>
<p>使用 MacPorts 和 Homebrew 都需要预装 XCode Command Line Tools，即意味着还需要提前预装 XCode。（根据官方文档来看，Fink 安装比较新的工具包时，因为提前编译完成所以无需依赖 XCode，但对于一些不是二进制的包，如果需要本地编译，还是需要依赖 XCode。换而言之，如果想在 OS 中编译源码，都需要 XCode 提供支持）</p>
    </div>
    <footer id="more">
        <a href='https://alimy.github.io/post/dev_202101191738/' title="继续阅读">阅读全文<nobr>&nbsp;<i class="fa fa-caret-right" aria-hidden="true"></i>
            </nobr></a>
    </footer>
</article>
                        
                            <article class="post panel-wrapper">
    <header>
        <h2><a href="https://alimy.github.io/post/dev_202101181248/" title="阅读全文">Kotlin: 几种设计模式 </a> </h2>
        
    </header>
    <div class="summary">
        <h4 id="创建型模式">创建型模式</h4>
<p>原始模型</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">Computer</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">val</span> cpu: String
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">PC</span>(<span style="color:#66d9ef">override</span> <span style="color:#66d9ef">val</span> cpu: String = <span style="color:#e6db74">&#34;Core&#34;</span>): Computer
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Server</span>(<span style="color:#66d9ef">override</span> <span style="color:#66d9ef">val</span> cpu: String = <span style="color:#e6db74">&#34;Xeon&#34;</span>): Computer
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">enum</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ComputerType</span> {
</span></span><span style="display:flex;"><span>	PC, Server
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ComputerFactory</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">produce</span>(type: ComputerType): Computer {
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">when</span>(type) {
</span></span><span style="display:flex;"><span>			<span style="color:#a6e22e">ComputerType</span>.PC <span style="color:#f92672">-&gt;</span> PC()
</span></span><span style="display:flex;"><span>			<span style="color:#a6e22e">ComputerType</span>.Server <span style="color:#f92672">-&gt;</span> Server()
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&gt;&gt;&gt; <span style="color:#66d9ef">val</span> comp = ComputerFactory().produce(<span style="color:#a6e22e">ComputerType</span>.PC)
</span></span><span style="display:flex;"><span>&gt;&gt;&gt; println(comp.cpu)
</span></span><span style="display:flex;"><span>Core
</span></span></code></pre></div>
    </div>
    <footer id="more">
        <a href='https://alimy.github.io/post/dev_202101181248/' title="继续阅读">阅读全文<nobr>&nbsp;<i class="fa fa-caret-right" aria-hidden="true"></i>
            </nobr></a>
    </footer>
</article>
                        
                            <article class="post panel-wrapper">
    <header>
        <h2><a href="https://alimy.github.io/post/dev_202101042002/" title="阅读全文">Tg: Serialized binary TL-schema in vkext format(*.tlo) </a> </h2>
        
    </header>
    <div class="summary">
        <pre tabindex="0"><code>---types---
/////
//
// Serialized binary TL-schema in vkext format
//
/////

tls.schema_v2 version:int date:int types_num:# types:types_num*[tls.Type] constructor_num:# constructors:constructor_num*[tls.Combinator] functions_num:# functions:functions_num*[tls.Combinator] = tls.Schema;

tls.type name:int id:string constructors_num:int flags:int arity:int params_type:long = tls.Type;
tls.combinator name:int id:string type_name:int left:tls.CombinatorLeft right:tls.CombinatorRight = tls.Combinator;
tls.combinatorLeftBuiltin = tls.CombinatorLeft;
tls.combinatorLeft args_num:# args:args_num*[tls.Arg] = tls.CombinatorLeft;

tls.combinatorRight value:tls.TypeExpr = tls.CombinatorRight;

tls.arg id:string flags:# var_num:flags.1?int exist_var_num:flags.2?int exist_var_bit:flags.2?int type:tls.TypeExpr = tls.Arg;

tls.exprType _:tls.TypeExpr = tls.Expr;
tls.exprNat _:tls.NatExpr = tls.Expr;

tls.natConst value:int = tls.NatExpr;
tls.natVar dif:int var_num:int = tls.NatExpr;

tls.typeVar var_num:int flags:int = tls.TypeExpr;
tls.array multiplicity:tls.NatExpr args_num:# args:args_num*[tls.Arg] = tls.TypeExpr;
tls.typeExpr name:int flags:int children_num:# children:children_num*[tls.Expr] = tls.TypeExpr;
---functions---
</code></pre>
    </div>
    <footer id="more">
        <a href='https://alimy.github.io/post/dev_202101042002/' title="继续阅读">阅读全文<nobr>&nbsp;<i class="fa fa-caret-right" aria-hidden="true"></i>
            </nobr></a>
    </footer>
</article>
                        
                            <article class="post panel-wrapper">
    <header>
        <h2><a href="https://alimy.github.io/post/dev_202012071348/" title="阅读全文">Tg:TL-formal </a> </h2>
        
    </header>
    <div class="summary">
        <p>See also <a href="https://core.telegram.org/mtproto/TL">TL Language</a>. For the syntax of declaring combinators, see in article <a href="https://core.telegram.org/mtproto/TL-combinators">Formal declaration of TL combinators</a>. For the syntax of patterns, see in article <a href="https://core.telegram.org/mtproto/TL-patterns">Formal declaration of TL patterns</a>.</p>
<h3 id="tokens">Tokens</h3>
<p>Comments are the same as in C/C++. They are removed by a lexical parser (for example, being replaced by a single space). Whitespace separates tokens. Except for string constants, tokens cannot contain spaces.</p>
<p>Character classes:</p>
<pre tabindex="0"><code>lc-letter ::= `a` | `b` | ... | `z`
uc-letter ::= `A` | `B` | ... | `Z`
digit ::= `0` | `1` | ... | `9`
hex-digit ::= digit | `a` | `b` | `c` | `d` | `e` | `f`
underscore ::= `_`
letter ::= lc-letter | uc-letter
ident-char ::= letter | digit | underscore
</code></pre>
    </div>
    <footer id="more">
        <a href='https://alimy.github.io/post/dev_202012071348/' title="继续阅读">阅读全文<nobr>&nbsp;<i class="fa fa-caret-right" aria-hidden="true"></i>
            </nobr></a>
    </footer>
</article>
                        
                    </div>
                    </br>
                    
                </section>
                <div class="pages">
  
<ul class="pagination">
  
  <li class="page-item">
    <a href="https://alimy.github.io/page/4/"  class="page-link" aria-label="Previous"><span
        aria-hidden="true"><i class="fa fa-arrow-left" aria-hidden="true"></i>&nbsp;&nbsp;上一页</span></a>
  </li>
  <li class="page-item">
    <a class="page-link" href="https://alimy.github.io/">1</a>
  </li>
  <li class="page-item">
    <a class="page-link" href="https://alimy.github.io/page/2/">2</a>
  </li>
  <li class="page-item">
    <a class="page-link" href="https://alimy.github.io/page/3/">3</a>
  </li>
  <li class="page-item">
    <a class="page-link" href="https://alimy.github.io/page/4/">4</a>
  </li>
  <li class="page-item active">
    <a class="page-link" href="https://alimy.github.io/page/5/">5</a>
  </li>
  <li class="page-item">
    <a class="page-link" href="https://alimy.github.io/page/6/">6</a>
  </li>
  <li class="page-item disabled">
    <span aria-hidden="true">&nbsp;&hellip;&nbsp;</span>
  </li>
  <li class="page-item">
    <a class="page-link" href="https://alimy.github.io/page/19/">19</a>
  </li>
  <li class="page-item">
    <a href="https://alimy.github.io/page/6/"  class="page-link" aria-label="Next">下一页&nbsp;&nbsp;<i
        class="fa fa-arrow-right" aria-hidden="true"></i></a>
  </li>
  
</ul>

</div>

            <footer id="copyright">
  <p>&copy;2015-至今 <a href="mailto:alimy@niubiu.com" title="Email:alimy@niubiu.com">北野 - Michael Li</a> All rights
    reserved.&nbsp;&nbsp;<a href="https://riiffy.com/alimy.github.io" title="访问统计" target="_blank">Riiffy</p>
</footer>
            </div>
        </div>
        <script>(function(){var WebP=new Image();WebP.onload=WebP.onerror=function(){
if(WebP.height!=2){var sc=document.createElement('script');sc.type='text/javascript';sc.async=true;
var s=document.getElementsByTagName('script')[0];sc.src='https://alimy.github.io/js/webpjs-0.0.2.min.js';s.parentNode.insertBefore(sc,s);}};
WebP.src='data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA';})();</script>

    </body>
</html>
